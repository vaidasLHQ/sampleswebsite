SampleVault Project - Quick Context for New Chat

ğŸ“ Location: /Users/vaidasbalciunas/Desktop/Sample/website_solidstart
ğŸŒ Live: https://website-solidstart.pages.dev
ğŸ“… Last Updated: December 19, 2024

âœ… CURRENT STATE:
- V12 Homepage: Split layout (60% hero / 40% sample browser), dark theme, mobile responsive
- E-commerce: Stripe checkout, Supabase database, Resend emails, download system
- User Auth: Login/Register (V12-themed), Supabase Auth, email confirmation disabled
- User Vault: Shows purchased samples, auto-updates after purchase, download functionality
- Cart: Clears automatically after successful payment
- Database: orders table with user_id, RLS policies enabled

ğŸ›  TECH STACK:
SolidJS + SolidStart + TypeScript | Howler.js | Supabase | Stripe | Resend | Cloudflare Pages

ğŸ“ KEY FILES:
- src/routes/index.tsx (V12 homepage)
- src/routes/vault.tsx (user's purchased samples)
- src/routes/cart.tsx (shopping cart)
- src/routes/login.tsx, register.tsx (auth pages)
- src/routes/api/checkout.ts (Stripe checkout)
- src/routes/api/stripe-webhook.ts (payment processing)
- src/lib/cart.ts (cart state)
- src/lib/demoPlayer.ts (audio player)
- src/app.css (all styles)

ğŸ”‘ CONFIG:
- Supabase: https://qborzulfzciqhjyfxcjz.supabase.co
- Tables: orders, order_items
- Storage: sample-previews (public), sample-full (private)
- Auth: Email confirmation disabled (testing)
- SMTP: Resend configured (sandbox: onboarding@resend.dev)

ğŸ§ª TEST CREDENTIALS:
- Demo Account: demo@samplevault.com / Demo2024!
- Stripe Test Card: 4242 4242 4242 4242 / 12/34 / 123

ğŸš€ COMMANDS:
cd /Users/vaidasbalciunas/Desktop/Sample/website_solidstart
npm run dev
npm run build && npx wrangler pages deploy dist --commit-dirty=true

âš ï¸ BEFORE GOING LIVE:
1. Verify Resend domain at https://resend.com/domains
2. Update Supabase SMTP sender email to verified domain
3. Enable email confirmation in Supabase Auth
4. Switch to Stripe live keys
5. Upload real audio files

ğŸ“Š DATABASE:
- orders: id, email, user_id (uuid, nullable), status, stripe_session_id, download_token, created_at
- order_items: id, order_id, sample_id, quantity, price_cents, created_at
- RLS: Users can only view their own orders (by user_id or email)

ğŸ”„ PURCHASE FLOW:
1. Add to cart (localStorage) â†’ 2. Stripe checkout â†’ 3. Order created with user_id â†’ 4. Payment â†’ 5. Webhook marks paid â†’ 6. Cart clears â†’ 7. Redirect to vault â†’ 8. Samples appear in vault

âœ… WORKING FEATURES:
- Homepage with audio player and sample browser
- Shopping cart with persistence
- Stripe checkout integration
- User authentication (login/register)
- User vault with purchased samples
- Download system with signed URLs
- Email delivery via Resend
- Mobile responsive design

Ready to continue! ğŸš€


